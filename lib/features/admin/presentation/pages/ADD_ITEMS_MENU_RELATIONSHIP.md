# ๐ ุงูุนูุงูุฉ ุจูู ูุธุงู ุฅุถุงูุฉ ุงูููุชุฌุงุช ูุงููุงุฆูุฉ

## ๐ **ูุธุฑุฉ ุนุงูุฉ**

ูุฐุง ุงูุฏููู ูุดุฑุญ ุงูุนูุงูุฉ ุงููุชูุงููุฉ ุจูู ูุธุงูู `add_items/` ู `menu/` ูู ุชุทุจูู ุฅุฏุงุฑุฉ ุงููุทุนู.

---

## ๐ฏ **ุงูุนูุงูุฉ ุงูุฃุณุงุณูุฉ**

### **ุงูุชุฏูู ุงูููุทูู:**
```
๐ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ (add_items/) 
    โ
๐พ ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    โ
๐ ุนุฑุถ ูู ุงููุงุฆูุฉ (menu/)
```

### **ุงููุณุคูููุงุช ุงููุชุจุงููุฉ:**

| ุงูููุฒุฉ | add_items/ | menu/ |
|--------|------------|-------|
| **ุฅูุดุงุก ููุชุฌุงุช** | โ ุฅุถุงูุฉ ุฌุฏูุฏุฉ | โ ุนุฑุถ ููุท |
| **ุชุญููู ุงูุตูุฑ** | โ ุฑูุน ุงูุตูุฑ | โ ุนุฑุถ ุงูุตูุฑ |
| **ุฅุฏุฎุงู ุงูุจูุงูุงุช** | โ ูููุฐุฌ ุชูุตููู | โ ุนุฑุถ ููุท |
| **ุงุฎุชูุงุฑ ุงููุฆุงุช** | โ ุชุญุฏูุฏ ุงููุฆุฉ | โ ุชุตููุฉ ุจุงููุฆุฉ |
| **ุฅุฏุงุฑุฉ ุงูุชููุฑ** | โ ุชุญุฏูุฏ ุงูุญุงูุฉ | โ ุชุบููุฑ ุงูุญุงูุฉ |
| **ุงูุจุญุซ ูุงูุชุตููุฉ** | โ ูุง ููุฌุฏ | โ ุจุญุซ ูุชุตููุฉ |
| **ุชุนุฏูู ุงูููุชุฌุงุช** | โ ุฅุถุงูุฉ ููุท | โ ุชุนุฏูู ูุญุฐู |

---

## ๐๏ธ **ุงูุจููุฉ ุงููุนูุงุฑูุฉ**

### **1. ูุดุงุฑูุฉ ุงูุจูุงูุงุช:**

**Domain Layer (ูุดุชุฑู):**
```dart
// entities/product.dart
class Product {
  final int? id;
  final String name;
  final String nameAr;
  final double price;
  final int mainCategoryId;
  // ... ุจุงูู ุงูุญููู
}
```

**Data Layer (ูุดุชุฑู):**
```dart
// models/product_model.dart
class ProductModel {
  // ุชุญููู ูู/ุฅูู JSON
  factory ProductModel.fromJson(Map<String, dynamic> json)
  Map<String, dynamic> toJson()
  
  // ุชุญููู ูู/ุฅูู Entity
  factory ProductModel.fromEntity(Product entity)
  Product toEntity()
}
```

**Repository (ูุดุชุฑู):**
```dart
// repositories/product_repository.dart
abstract class ProductRepository {
  Future<Product> createProduct(Product product);
  Future<List<Product>> getProducts();
  Future<Product> updateProduct(Product product);
  Future<bool> deleteProduct(String id);
}
```

### **2. Presentation Layer (ูููุตู):**

**add_items/ (ูุธุงู ุงูุฅุถุงูุฉ):**
```
๐ presentation/
โโโ pages/
โ   โโโ admin_add_item_page.dart    # ูููุฐุฌ ุฅุถุงูุฉ ููุชุฌ
โโโ widgets/
โ   โโโ image_upload_widget.dart    # ุฑูุน ุงูุตูุฑ
โ   โโโ category_selector.dart      # ุงุฎุชูุงุฑ ุงููุฆุฉ
โ   โโโ form_fields.dart           # ุญููู ุงููููุฐุฌ
โโโ cubit/
    โโโ product_cubit.dart         # ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฅุถุงูุฉ
    โโโ product_events.dart        # ุฃุญุฏุงุซ ุงูุฅุถุงูุฉ
    โโโ product_states.dart        # ุญุงูุงุช ุงูุฅุถุงูุฉ
```

**menu/ (ูุธุงู ุงูุนุฑุถ):**
```
๐ presentation/
โโโ pages/
โ   โโโ admin_menu_page.dart       # ุตูุญุฉ ุงููุงุฆูุฉ
โโโ widgets/
โ   โโโ menu_filter_tabs.dart      # ุชุตููุฉ ุงููุฆุงุช
โ   โโโ menu_item_card.dart        # ุจุทุงูุฉ ุงูููุชุฌ
โ   โโโ search_widget.dart         # ุงูุจุญุซ
โโโ cubit/
    โโโ menu_cubit.dart            # ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุงุฆูุฉ
    โโโ menu_events.dart           # ุฃุญุฏุงุซ ุงููุงุฆูุฉ
    โโโ menu_states.dart           # ุญุงูุงุช ุงููุงุฆูุฉ
```

---

## ๐ **ุงูุชููู ุจูู ุงููุธุงููู**

### **1. ูู ุงููุงุฆูุฉ ุฅูู ุฅุถุงูุฉ ููุชุฌ:**

**ูู Bottom Navigation:**
```dart
// persistent_bottom_nav_bar_widget.dart
PlusButtonWidget(
  onPressed: () {
    Navigator.pushNamed(context, '/admin/add-item');
  },
)
```

**ูู Menu Page:**
```dart
// admin_menu_page.dart
FloatingActionButton(
  onPressed: () {
    Navigator.pushNamed(context, AppRoutes.adminAddItem);
  },
  child: Icon(Icons.add),
)
```

### **2. ูู ุฅุถุงูุฉ ููุชุฌ ุฅูู ุงููุงุฆูุฉ:**

**ุจุนุฏ ุญูุธ ุงูููุชุฌ ุจูุฌุงุญ:**
```dart
// admin_add_item_page.dart
void _onSaveSuccess() {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(content: Text('ุชู ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ')),
  );
  Navigator.pop(context); // ุงูุนูุฏุฉ ูููุงุฆูุฉ
}
```

---

## ๐ **ูุดุงุฑูุฉ API Endpoints**

### **Endpoints ุงููุดุชุฑูุฉ:**

| ุงูุนูููุฉ | Endpoint | Method | add_items/ | menu/ |
|---------|----------|--------|------------|-------|
| **ุฌูุจ ุงูููุชุฌุงุช** | `/admin/products` | GET | โ | โ |
| **ุฅุถุงูุฉ ููุชุฌ** | `/admin/products` | POST | โ | โ |
| **ุชุญุฏูุซ ููุชุฌ** | `/admin/products/{id}` | PUT | โ | โ |
| **ุญุฐู ููุชุฌ** | `/admin/products/{id}` | DELETE | โ | โ |
| **ุฌูุจ ุงููุฆุงุช** | `/admin/categories` | GET | โ | โ |

### **ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:**

**ูู add_items/:**
```dart
// ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
final response = await dio.post(
  '/admin/products',
  data: productModel.toJson(),
);
```

**ูู menu/:**
```dart
// ุฌูุจ ุงูููุชุฌุงุช ููุนุฑุถ
final response = await dio.get('/admin/products');
final products = (response.data as List)
    .map((json) => ProductModel.fromJson(json))
    .toList();
```

---

## ๐จ **ูุงุฌูุฉ ุงููุณุชุฎุฏู**

### **1. add_items/ (ุตูุญุฉ ุงูุฅุถุงูุฉ):**

**ุงูููุฒุงุช:**
- โ ูููุฐุฌ ุชูุตููู ูุฅุฏุฎุงู ุงูุจูุงูุงุช
- โ ุฑูุน ุงูุตูุฑ ูุน ูุนุงููุฉ
- โ ุงุฎุชูุงุฑ ุงููุฆุงุช ูุงูุชุตูููุงุช
- โ ุฅุนุฏุงุฏุงุช ุงูุชููุฑ ูุงููููุฒุงุช
- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- โ ุฑุณุงุฆู ุงูุฎุทุฃ ูุงููุฌุงุญ

**ุงูุชุตููู:**
- ๐ ูููุฐุฌ ุทููู ูุน ุญููู ูุชุนุฏุฏุฉ
- ๐ผ๏ธ ููุทูุฉ ุฑูุน ุงูุตูุฑ
- ๐ท๏ธ ููุงุฆู ููุณุฏูุฉ ูููุฆุงุช
- โ ูุฑุจุนุงุช ุงุฎุชูุงุฑ ููุฅุนุฏุงุฏุงุช

### **2. menu/ (ุตูุญุฉ ุงููุงุฆูุฉ):**

**ุงูููุฒุงุช:**
- โ ุนุฑุถ ุงูููุชุฌุงุช ูู ูุงุฆูุฉ
- โ ุชุตููุฉ ุญุณุจ ุงููุฆุงุช
- โ ุงูุจุญุซ ูู ุงูููุชุฌุงุช
- โ ุชุนุฏูู ูุญุฐู ุงูููุชุฌุงุช
- โ ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชููุฑ
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

**ุงูุชุตููู:**
- ๐ ูุงุฆูุฉ ุจุทุงูุงุช ููููุชุฌุงุช
- ๐ท๏ธ ุดุฑูุท ุชุตููุฉ ุฃููู
- ๐ ุญูู ุจุญุซ
- โ๏ธ ูุงุฆูุฉ ุฎูุงุฑุงุช ููู ููุชุฌ

---

## ๐ **ุชุฏูู ุงูุนูู (Workflow)**

### **ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ:**

1. **Admin** โ ููุชุญ ุตูุญุฉ ุฅุถุงูุฉ ููุชุฌ
2. **Add Item Page** โ ูููุฃ ุงูุจูุงูุงุช ูุงูุตูุฑ
3. **Form Validation** โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
4. **API Call** โ ุฅุฑุณุงู ุงูุจูุงูุงุช ููุจุงู ุฅูุฏ
5. **Database** โ ุญูุธ ุงูููุชุฌ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
6. **Success Response** โ ุงุณุชูุจุงู ุชุฃููุฏ ุงููุฌุงุญ
7. **Navigation** โ ุงูุนูุฏุฉ ูุตูุญุฉ ุงููุงุฆูุฉ
8. **Menu Refresh** โ ุชุญุฏูุซ ุงููุงุฆูุฉ ุชููุงุฆูุงู

### **ุนุฑุถ ูุฅุฏุงุฑุฉ ุงูููุชุฌุงุช:**

1. **Menu Page Load** โ ุชุญููู ุงูููุชุฌุงุช ูู API
2. **Categories Load** โ ุฌูุจ ุงููุฆุงุช ุงููุชุงุญุฉ
3. **Display Products** โ ุนุฑุถ ุงูููุชุฌุงุช ูู ุงููุงุฆูุฉ
4. **Filter/Search** โ ุชุตููุฉ ูุจุญุซ ุญุณุจ ุงูุญุงุฌุฉ
5. **Edit/Delete** โ ุชุนุฏูู ุฃู ุญุฐู ุงูููุชุฌุงุช
6. **Real-time Update** โ ุชุญุฏูุซ ููุฑู ูููุงุฆูุฉ

---

## ๐๏ธ **ุงูููุฒุงุช ุงููุดุชุฑูุฉ**

### **1. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management):**

**BlocProvider Pattern:**
```dart
// ูู ููุง ุงููุธุงููู
BlocProvider(
  create: (context) => getIt<ProductCubit>(),
  child: BlocBuilder<ProductCubit, ProductState>(
    builder: (context, state) {
      // ุจูุงุก ุงููุงุฌูุฉ ุญุณุจ ุงูุญุงูุฉ
    },
  ),
)
```

### **2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**

**Error Handling:**
```dart
// ูู ููุง ุงููุธุงููู
BlocListener<ProductCubit, ProductState>(
  listener: (context, state) {
    if (state is ProductError) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('ุฎุทุฃ: ${state.message}'),
          backgroundColor: Colors.red,
        ),
      );
    }
  },
)
```

### **3. ุงูุชุญูู ูู ุงูุตุญุฉ:**

**Form Validation:**
```dart
// ูู add_items/
if (_formKey.currentState!.validate()) {
  // ุฅุฑุณุงู ุงูุจูุงูุงุช
}
```

**Data Validation:**
```dart
// ูู ููุง ุงููุธุงููู
if (product.isValid) {
  // ูุนุงูุฌุฉ ุงูุจูุงูุงุช
}
```

---

## ๐ **ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ**

### **1. ุชุญุณููุงุช add_items/:**
- โ ุฅุถุงูุฉ ูุนุงููุฉ ูุจุงุดุฑุฉ ููููุชุฌ
- โ ุฏุนู ุงูุณุญุจ ูุงูุฅููุงุช ููุตูุฑ
- โ ุญูุธ ุงููุณูุฏุฉ ุชููุงุฆูุงู
- โ ุงูุชุฑุงุญุงุช ูููุฆุงุช ูุงูุชุตูููุงุช

### **2. ุชุญุณููุงุช menu/:**
- โ ุชุฑุชูุจ ุงูููุชุฌุงุช ุจุงูุณุญุจ
- โ ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงููุจูุนุงุช
- โ ุชุตุฏูุฑ ุงููุงุฆูุฉ ุจุตูุบ ูุฎุชููุฉ
- โ ุฅุดุนุงุฑุงุช ููููุชุฌุงุช ููุฎูุถุฉ ุงููุฎุฒูู

### **3. ุชุญุณููุงุช ูุดุชุฑูุฉ:**
- โ ูุฒุงููุฉ ููุฑูุฉ ุจูู ุงููุธุงููู
- โ ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู
- โ ุชุญูููุงุช ููุตูุฉ ููููุชุฌุงุช
- โ ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช

---

## ๐ฏ **ุงูุฎูุงุตุฉ**

**`add_items/`** ู **`menu/`** ููุง ูุธุงูุงู ูุชูุงููุงู ูุนููุงู ูุนุงู ูุชูููุฑ ุชุฌุฑุจุฉ ุดุงููุฉ ูุฅุฏุงุฑุฉ ููุชุฌุงุช ุงููุทุนู:

- **add_items/**: ูุณุคูู ุนู ุฅูุดุงุก ูุฅุฏุฎุงู ุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ
- **menu/**: ูุณุคูู ุนู ุนุฑุถ ูุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ุงูููุฌูุฏุฉ

**ุงูุนูุงูุฉ ุชูุงูููุฉ ูููุณุช ูููุตูุฉ** - ููุงููุง ูุณุชุฎุฏู ููุณ ุงูุจูุงูุงุช ูุงูู APIุ ููู ููู ููููุง ูุงุฌูุฉ ูุณุชุฎุฏู ูุฎุตุตุฉ ูุงุญุชูุงุฌุงุชู ุงููุญุฏุฏุฉ. 